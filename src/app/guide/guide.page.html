<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title> {{ "guide.header" | translate: params }} </ion-title>
    <sync-spinner-component slot="primary"></sync-spinner-component>

    <ion-buttons slot="primary" class="header_cta">
      <ion-back-button></ion-back-button>
      <ion-button (click)="presentGuideInfo(guideId)">
        <ion-icon name="information-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="grey-background">
  <span *ngIf="isLoadedContent">
    <div *ngIf="guideSteps && guideSteps.length > 0" class="guide-step" [ngClass]="{'has-assets' : haveAssets}">
      <ion-slides #guideStepSlide #guideStepSlideElemRef pager="true" [options]="slideOpts"
        (ionSlideWillChange)="changeGuideStepCurrentSlide()">
        <ion-slide *ngFor="let step of guideSteps; let stepNumber = index">
          <ng-template #guideStepContent></ng-template>
        </ion-slide>
      </ion-slides>

      <div *ngIf="guideAssets.length" class="guide-assets">
        <ion-card>
          <ion-item class="asset-item">
            <ion-icon name="information-circle" slot="start"></ion-icon>
            <ion-label>{{ "guide.Assets" | translate: params }}</ion-label>
          </ion-item>
          <section class="ion-padding">
            <ion-row>
              <div class="asset_wrapper">
                <label *ngFor="let asset of guideAssets; trackBy: trackGuideAsset">
                  <span (click)="openFile(asset.getFileName(), asset.getFileUrl(), asset.TABLE_NAME, asset.name)"
                    *ngIf="asset.isExistFileByIndex()">
                    <!-- pdf -->
                    <img [src]="asset.getFileImagePath(guideAssetModelFileMapIndexEnum.PDF_FILE_IMAGE)"
                      *ngIf="asset.isPdf()">
                    <!-- 3d -->
                    <img src="../../assets/icon/3d.svg" *ngIf="asset.is3dFile()">
                    <!-- other -->
                    <img src="" *ngIf="!asset.isPdf() && !asset.is3dFile()">
                    <p> <strong>{{ asset.name }}</strong> </p>
                  </span>
                  <!-- text -->
                  <span *ngIf="!asset.isExistFileByIndex()" (click)="openAssetTextModal(asset)">
                    <img src="../../assets/icon/text.svg">
                    <p><strong>{{ asset.name }}</strong></p>
                  </span>
                </label>
              </div>

            </ion-row>
          </section>
        </ion-card>
      </div>
    </div>
    <ng-template #guideStepContentTemplate></ng-template>
  </span>
</ion-content>