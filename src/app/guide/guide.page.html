<style>
    :root {
        --ion-safe-area-top: 20px;
        --ion-safe-area-bottom: 22px;
    }
    .swiper-slide {
        display: block;
    }
    .swiper-wrapper {
        margin-bottom: 15px;
    }
    ion-slide > h2 {
        margin-top: 2.8rem;
    }
    table {
        color: red;
        max-width: 100% !important;
    }
    table td p {
        font-size: inherit !important;
        margin: 0;
    }
    table td {
        color: red;
        padding: 5px;
    }
</style>
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Guide: {{ guide.title }}
    </ion-title>
    <ion-buttons slot="primary">
        <ion-button color="primary" fill="solid" [routerLink]="['/guide/' + guide.idApi + '/feedback']">
            Feedback
        </ion-button>
    </ion-buttons>
    <sync-spinner-component slot="primary"></sync-spinner-component>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <div *ngIf="guideSteps && guideSteps.length === 0">
        No information here yet.
    </div>
    <div *ngIf="guideSteps && guideSteps.length > 0">
        <ion-slides pager="true"
                    [options]="slideOpts"
        >
            <ion-slide class="ion-padding"
                       *ngFor="let step of guideSteps; let stepNumber = index;"
            >
                <div slot="fixed">{{ stepNumber + 1 }} / {{ guideSteps.length }}</div>
                <img *ngIf="step.isImageAttachedFile()"
                     (click)="openFile(step.getApiFilePath(), step.getLocalFilePath(), step.title)"
                     src="{{ step.getFile() }}"
                     imageViewer
                >
                <ion-icon name="videocam"
                          class="videocam"
                          slot="start"
                          *ngIf="step.isVideoAttachedFile()"
                          (click)="openFile(step.getApiFilePath(), step.getLocalFilePath())"
                >
                </ion-icon>
                <img *ngIf="!step.isImageAttachedFile() && !step.isVideoAttachedFile()"
                     src="/assets/placeholder.jpg"
                     imageViewer
                >
                <h2>{{step.title}}</h2>
                <div style="position: relative;display: flex;flex-direction: column;min-width: 0;word-wrap: break-word;"
                     [innerHTML]="step.description_html | safeHtml"
                >
                </div>
            </ion-slide>
        </ion-slides>
        <ion-card class="ion-text-center ion-padding">
            <section *ngIf="guideAssets.length">
                <h2>
                    Assets
                </h2>
                <div *ngFor="let asset of guideAssets; trackBy: trackGuideAsset">
                    <div class="ion-text-center" *ngIf="asset.isFile() && asset.isPdf()">
                        <img (click)="openFile(asset.getApiPdfImageFilePath(), asset.getLocalPdfImageFilePath(), asset.name)"
                             class="pdf-image"
                             src="{{ asset.getPdf() }}"
                             imageViewer
                        >
                    </div>
                    <div *ngIf="asset.isFile() && !asset.isPdf()">
                        <img (click)="openFile(asset.getApiFilePath(), asset.getLocalFilePath(), asset.name)"
                             class="pdf-image"
                             src="{{ asset.getAssetFile() }}" imageViewer
                        >
                    </div>
                    <ion-button *ngIf="!asset.isFile()" color="medium" (click)="openAssetTextModal(asset)">
                        {{ asset.name }}
                    </ion-button>
                </div>
            </section>
        </ion-card>
    </div>
</ion-content>

