<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      {{ "guide.header" | translate: params }}
    </ion-title>
    <sync-spinner-component slot="primary"></sync-spinner-component>
    <ion-back-button text=""></ion-back-button>
  </ion-toolbar>
</ion-header>

<ion-content color="primary">
  <span *ngIf="isLoadedContent">
    <div *ngIf="guideSteps && guideSteps.length > 0" class="guide-step" [ngClass]="{'has-assets' : haveAssets}">
      <ion-slides #guideStepSlide
                  #guideStepSlideElemRef
                  pager="true"
                  [options]="slideOpts"
                  (ionSlideWillChange)="changeGuideStepCurrentSlide()"
      >
        <ion-slide *ngFor="let step of guideSteps; let stepNumber = index">
          <ng-template #guideStepContent></ng-template>
        </ion-slide>
      </ion-slides>
    <div *ngIf="guideAssets.length" class="guide-assets">
      <ion-card color="light" >
        <ion-item>
          <ion-icon name="information-circle" slot="start"></ion-icon>
        <ion-label>{{ "guide.Assets" | translate: params }}</ion-label>
        </ion-item>
        <section>
          <ion-row>
            <span
                    *ngFor="let asset of guideAssets; trackBy: trackGuideAsset"
                    class="ion-padding"
            >
              <span *ngIf="asset.isExistFileByIndex()">
                <img *ngIf="asset.isPdf()"
                        (click)="openFile(asset.getFileName(), asset.getFileUrl(), asset.TABLE_NAME, asset.name)"
                        class="pdf-image"
                        [src]="asset.getFileImagePath(guideAssetModelFileMapIndexEnum.PDF_FILE_IMAGE)"
                />
                <ion-button *ngIf="asset.is3dFile()"
                            color="medium"
                            (click)="openFile(asset.getFileName(), asset.getFileUrl(), asset.TABLE_NAME, asset.name)"
                >
                  <ion-icon name="cube"></ion-icon>
                  {{ asset.name }}
                </ion-button>
                <img *ngIf="!asset.isPdf() && !asset.is3dFile()"
                     (click)="openFile(asset.getFileName(), asset.getFileUrl(), asset.TABLE_NAME, asset.name)"
                     class="pdf-image"
                     [src]="asset.getFileImagePath()"
                />
              </span>
              <ion-button *ngIf="!asset.isExistFileByIndex()"
                          color="medium"
                          (click)="openAssetTextModal(asset)"
              >
                {{ asset.name }}
              </ion-button>
            </span>
          </ion-row>
        </section>
      </ion-card>
  </div>
    </div>
    <ng-template #guideStepContentTemplate></ng-template>
  </span>
</ion-content>
